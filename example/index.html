<html>
<head>
<style type="text/css">
body {
	width: 100%;
	height: 100%;
	text-align: center;
}
# container {
	margin: 0px, auto;
	text-align: left;
}
#fingerboard {
	width: 800px;
	height: 160px;
}
@media(max-height: 400px){ #fingerboard { height: 70%; } }
@media(max-width: 850px) { #fingerboard { width: 95%; } }

</style>
</head>
<body>
	<div id="container">
		<h3>Teh Fingerboard</h3>
		<p>
			Note: <span id="hovered-note"></span>
		</p>
		<canvas id="fingerboard"></canvas>
		<div class="user-inputs"><br/>
			<h3>Model</h3>
			<p>
				Scale
				<select id="scale-selector">
					<!-- C, Db, D, Eb, E, F, Gb, G, Ab, A, Bb, B  -->
					<!--    W      W    H    W      W      W     H -->
					<option value='[1,3,5,6,8,10,12]'>
						Major
					</option>
					<option value='1,3,4,6,8,9,11'>
						Minor
					</option>
				</select>
			</p>
			<p>
				Root
				<select id="root-selector">
					<option value=1>C</option>
					<option value=2>Db</option>
					<option value=3>D</option>
					<option value=4>Eb</option>
					<option value=5>E</option>
					<option value=6>F</option>
					<option value=7>Gb</option>
					<option value=8>G</option>
					<option value=9>Ab</option>
					<option value=10>A</option>
					<option value=11>Bb</option>
					<option value=12>B</option>
				</select>
			</p>
			<p>
				Tuning
				<select id="tuning-selector">
					<option value="28,33,38,43,47,52">Standard</option>
					<option value="26,33,38,43,47,52">Drop D</option>
				</select>
			</p>
			<h3>View</h3>
			<p>
				Selector Color
				<select id='selector-color'>
					<option value='default'>Default</option>
					<option value='blue'>Blue</option>
					<option value='red'>Red</option>
					<option value='green'>Green</option>
				</select>
			</p>
			<p>
				Selector Style
				<select id='selector-style'>
					<option value='default'>Default</option>
					<option value='notation'>Notation</option>
					<option value='notation-index'>Notation with index</option>
				</select>
			</p>
		</div>
	</div>
</body>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="../dist/fingerboard.js"></script>
<script>
	var fingerboard = new Fingerboard($('#fingerboard')[0], {
		model: {
			scale:{
				root: 1,
				values: [1,3,5,6,8,10,12]
			}
		}
	})

	fingerboard.noteclick(function(note){
		console.log(note)
	})

	fingerboard.notehover(function(note){
		$('#hovered-note').text(note.interval.notation + note.interval.index)
	})

	var modelMods = {
		'#root-selector': function(val){ return { scale: { root: val } } },
		'#tuning-selector': function(val){ return { tuning: val } },
		'#scale-selector': function(val){ return { scale: { values: val } } }
	}

	$.each(modelMods, function(select, gen) {
		$(select).on('change', function(ev){
			fingerboard.set({
				model: gen(ev.target.value)
			})
		})
	})

	var colorScheme = 'default',
		selectorStyle = 'default'

	var viewMods = {
		'#selector-color': function(val) { colorScheme = val },
		'#selector-style': function(val) { selectorStyle = val }
	}

	$.each(viewMods, function(select, update){
		$(select).on('change', function(ev){
			update(ev.target.value)
			var args = {}
			var View = Fingerboard.View

			var curry = (function(){
				if(selectorStyle === 'default')
					return View.selectors.default
				else if(selectorStyle === 'notation')
					return function(tonicColor, elseColor) {
						return View.selectors.notationDots({
							tonicColor: tonicColor,
							elseColor: elseColor,
							withIndex: false
						})
					}
				else if(selectorStyle === 'notation-index')
					return View.selectors.notationDots({
						tonicColor: tonicColor,
						elseColor: elseColor
					})
			})()

			if(colorScheme === 'default')
				args.drawSelector = curry()
			else if(colorScheme === 'blue')
				args.drawSelector = curry('#003D7A','#6399CE')
			else if(colorScheme === 'red')
				args.drawSelector = curry('#5C1C26','#D68391')
			else if(colorScheme == 'green')
				args.drawSelector = curry('#1C5C21','#6AAB6F')

			fingerboard.set({view: args})

		})
	})

</script>
